document.addEventListener("DOMContentLoaded",(()=>{let e=null;const t=()=>{e&&(e.remove(),e=null)};document.addEventListener("selectionchange",(()=>{if(window.getSelection().toString().trim()){const o=window.getSelection(),n=o.toString().trim();if(!n)return void t();const i=o.getRangeAt(0).getBoundingClientRect();((o,n,i)=>{t();const s=document.createElement("div");s.style.cssText="position:fixed;z-index:9999;display:flex;align-items:center;gap:1rem;box-shadow:0 2px 4px lightgray;background:white;padding:.5rem 1rem;border-radius:1rem;opacity:0;transition-property: opacity, top, left;transition-duration:.2s;transition-timing-func:ease",s.id="dragSearchPopup";const d=document.createElement("img");d.style.cssText="display:block;width:1rem;height:1rem;cursor:pointer",d.src="/assets/img/icons/g.webp",d.alt="Google",d.title="Google 검색",d.loading="lazy",d.onclick=()=>{window.open(`https://www.google.com/search?q=${encodeURIComponent(i)}`,"_blank")};const c=document.createElement("img");c.style.cssText="display:block;width:1rem;height:1rem;cursor:pointer",c.src="/assets/img/icons/youtube-icon.webp",c.alt="Youtube",c.title="Youtube 검색",c.loading="lazy",c.onclick=()=>{window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent(i)}`,"_blank")},s.appendChild(d),s.appendChild(c),document.body.appendChild(s);const l=s.offsetWidth;s.offsetHeight;let r=o-l/2,a=n+10;r<10&&(r=10),r+l>window.innerWidth-10&&(r=window.innerWidth-l-10),s.style.left=`${r}px`,s.style.top=`${a}px`,requestAnimationFrame((()=>{s.style.opacity="1"})),e=s})(i.left+i.width/2,i.bottom,n)}else t()}))}));